<!doctype html>
<html>
<head>
<script src="http://momentjs.com/downloads/moment.min.js"></script>
<script src="http://code.jquery.com/jquery.min.js"></script>
<script src="https://rawgithub.com/quarterto/Estira/master/index.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="../dist/elessar.min.js"></script>
<link rel="stylesheet" type="text/css" href="../elessar.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
</head>
<body>
  <div id="time-table"></div>
    <form id="task">
     <div class="form-group">
       <label for="work_start">work_start</label>
      <input type="time" name="work_start" data-tt-model="work_start">
    </div>
     <div class="form-group">
       <label for="work_end">work_end</label>
      <input type="time" name="work_end" data-tt-model="work_end">
    </div>
     <div class="form-group">
       <label for="unpaid_minutes">unpaid_minutes</label>
      <input type="text" name="unpaid_minutes" data-tt-model="unpaid_minutes">
    </div>
     <div class="form-group">
       <label for=job_name>job_name</label>
      <input type="text" name="job_name" data-tt-model="job_name">
    </div>
     <div class="form-group">
       <label for="job_id">job_id</label>
      <input type="text" name="job_id" data-tt-model="job_id">
    </div>
     <div class="form-group">
       <label for="timecard_id">timecard_id</label>
      <input type="text" name="timecard_id" data-tt-model="timecard_id">
    </div>
    <button data-tt-model="deleteButton">delete</button>
    <button type="submit" class="btn btn-default">Submit</button>

    </form>

<pre class="changing"></pre>

<script>
var timeTable = TimeTable({
  min:moment().startOf('day').add(7, 'hour').format('LLLL'),
  max:moment().startOf('day').add(18, 'hour').format('LLLL'),
});
$('body').prepend(timeTable.$el);
timeTable.on("click.task", function(ev, t){
  timeTable.unbindTasks();
  timeTable.bindTaskForm(t, $("form"));
}).on("changing.task", function(ev, t){
}).on("change.task", function(ev, t){
}).on("addtask", function(ev, t){
  timeTable.bindTaskForm(t, $("form"));
}).on("delete.task", function(ev,jobId){
});
window.t = timeTable;
$('form').submit(function(e){
  e.preventDefault();
  var sArray = $(this).serializeArray();
  var params = {};
  for(var t of sArray){
    params[t.name] = t.value;
  }
  timeTable.addTask(params);
  e.preventDefault();
});
$('body').click(function(){
  timeTable.unbindTasks();
});
$('input,button').click(function(ev){
  ev.stopPropagation();
});
</script>
</body>
</html>
