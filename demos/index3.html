<!doctype html>
<html>
<head>
<script src="/lib/external/moment.min.js"></script>
<script src="/lib/external/jquery.min.js"></script>
<script src="/lib/external/index.js"></script>
<script src="/lib/external/bootstrap.min.js"></script>
<script src="/dist/timetable.min.js"></script>
<link rel="stylesheet" type="text/css" href="../elessar.css">
<link rel="stylesheet" type="text/css" href="../bootstrap.min.css">
</head>
<body>
  <h3>1000!!!</h3>
  <div id="sliders"></div>
  <form id="edit-form" style="position: fixed; top:100px; right:0; background-color:white; border-width:2px; border-style:solid; text-align:center; z-index:9999999; opacity:0.7">
     <h4>Editing form</h4>
     <div class="form-group">
       <label for="work_start">work_start</label>
      <input type="time" name="work_start" data-tt-model="work_start" placeholder="HH:mm ex) 19:30">
    </div>
     <div class="form-group">
       <label for="work_end">work_end</label>
      <input type="time" name="work_end" data-tt-model="work_end" placeholder="HH:mm ex) 20:30">
    </div>
     <div class="form-group">
       <label for="unpaid_minutes">unpaid_minutes</label>
      <input type="text" name="unpaid_minutes" data-tt-model="unpaid_minutes">
    </div>
     <div class="form-group">
       <label for=job_name>job_name</label>
      <input type="text" name="job_name" data-tt-model="job_name">
    </div>
     <div class="form-group">
       <label for="job_id">job_id</label>
      <input type="text" name="job_id" data-tt-model="job_id">
    </div>
     <div class="form-group">
       <label for="timecard_id">timecard_id</label>
      <input type="text" name="timecard_id" data-tt-model="timecard_id">
    </div>
    <button class="btn btn-danger delete-task" data-tt-model="deleteButton">delete</button>
  </form>
<script>
var lastTimeTable;
var lastTask;
function clickHandler(ev ,t, timeTable){
  console.log('click');
  console.log(t);
  console.log(timeTable);

  if(lastTimeTable)
    lastTimeTable.unbindTasks();

  if(lastTask)
    lastTask.range.$el.removeClass('selected');
  lastTimeTable = timeTable;
  lastTask = t;
  timeTable.bindTaskForm(t, $("#edit-form"));
}
var timeTable = TimeTable();
for(var i=0;i<1000;i++){
  var timeTable = new TimeTable();
  $("#sliders").prepend(timeTable.$el);
  timeTable.on("click.task", clickHandler);
}

</script>
</body>
</html>
